{"ast":null,"code":"var _jsxFileName = \"/Users/mac/IdeaProjects/Library_Resources_DB_Management_System/src/main/client/src/customerPage/Payment.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from 'react-router';\nimport './Payment.css';\nimport { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport axios from 'axios';\nimport userRequest from \"../request/user-request\";\n// axios.defaults.headers.common[\"Authorization\"] = `Bearer ${localStorage.getItem(\"token\")}`;\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Payment() {\n  _s();\n  const now = moment().format('YYYY-MM-DD');\n  const [invoices, setinvoices] = useState([]);\n  const [cardholdername, setcardholdername] = useState();\n  const [paymenttype, setpaymenttype] = useState();\n  const [amount, setpaymentamount] = useState();\n  const [invoiceid, setinvoiceid] = useState();\n  const getAllres = () => {\n    const config = {\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    };\n    const customerId = Number(localStorage.getItem(\"currentCustomerId\"));\n    axios.get(`http://localhost:8080/api/invoice/list/${4}`, config).then(response => {\n      setinvoices([]);\n      var list = [];\n      for (var obj in response.data) {\n        // reservations.push(response.data[obj])\n        list.push(response.data[obj]);\n      }\n      console.log(\"here\");\n      setinvoices(list);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n  useEffect(() => {\n    getAllres();\n  }, []);\n  const dopay = async event => {\n    console.log(\"pay\");\n    event.preventDefault();\n    const paymethod = document.getElementById(\"method\").value();\n    const url = `http://localhost:8080/api/payment/add`;\n    await axios.post(url, {\n      \"invoice\": {\n        \"id\": invoiceid\n      },\n      \"paymentAmount\": amount,\n      \"method\": paymethod,\n      \"cardHolderFullName\": cardholdername\n    }, config).then(res => {\n      const result = res.data;\n      console.log(\"success\");\n    }).catch(async error => {\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Payment\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: invoices.map(invoice => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"rental id: \", invoice.id, \"total amount:\", invoice.amount]\n        }, invoice.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"method\",\n        id: \"method\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cash\",\n          children: \"cash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"creditcard\",\n          children: \"credit card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"debitcard\",\n          children: \"debit card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"paypal\",\n          children: \"pay pal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this), \"onChange=\", e => setpaymenttype(e.target.value)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"myInput\",\n        placeholder: \"invoice id..\",\n        value: invoiceid,\n        onChange: e => setinvoiceid(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"myInput\",\n        placeholder: \"type amount..\",\n        value: amount,\n        onChange: e => setpaymentamount(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"myInput\",\n        placeholder: \"card holder name\",\n        value: cardholdername,\n        onChange: e => setcardholdername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: dopay,\n          children: \"pay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(Payment, \"AdwNA7r2Gh38S9DiET4xQAKa1/Q=\");\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["useNavigate","useState","useEffect","moment","axios","userRequest","Payment","now","format","invoices","setinvoices","cardholdername","setcardholdername","paymenttype","setpaymenttype","amount","setpaymentamount","invoiceid","setinvoiceid","getAllres","config","headers","localStorage","getItem","customerId","Number","get","then","response","list","obj","data","push","console","log","catch","e","dopay","event","preventDefault","paymethod","document","getElementById","value","url","post","res","result","error","map","invoice","id","target"],"sources":["/Users/mac/IdeaProjects/Library_Resources_DB_Management_System/src/main/client/src/customerPage/Payment.js"],"sourcesContent":["import { useNavigate } from 'react-router';\nimport './Payment.css';\nimport { useState,useEffect } from 'react';\nimport moment from 'moment';\nimport axios from 'axios';\nimport userRequest from \"../request/user-request\"\n// axios.defaults.headers.common[\"Authorization\"] = `Bearer ${localStorage.getItem(\"token\")}`;\nfunction Payment(){\n    const now = moment().format('YYYY-MM-DD');  \n    const [invoices, setinvoices] = useState([]);\n    const [cardholdername,setcardholdername] = useState();\n    const [paymenttype, setpaymenttype] = useState();\n    const [amount,setpaymentamount] = useState();\n    const [invoiceid,setinvoiceid] = useState();\n\n\n    const getAllres = () => {\n        const config = {\n          headers: {\n            \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        }\n        const customerId = Number(localStorage.getItem(\"currentCustomerId\"));\n      \n        axios.get(`http://localhost:8080/api/invoice/list/${4}`, config).then((response) => {\n          setinvoices([])\n          var list = []\n          for (var obj in response.data) {\n            // reservations.push(response.data[obj])\n            list.push(response.data[obj])\n          }\n          console.log(\"here\")\n          setinvoices(list)\n      }).catch((e) => {\n        console.log(e);\n      })\n    }\n    useEffect(() => {\n        getAllres();\n    }, [])\n\n\n    const dopay = async (event) => {\n        console.log(\"pay\")\n        event.preventDefault();\n        const paymethod = document.getElementById(\"method\").value();\n        const url = `http://localhost:8080/api/payment/add`\n        await axios.post(url, \n            {\n                \"invoice\": {\n                    \"id\":invoiceid\n                },\n              \"paymentAmount\":amount,\n              \"method\": paymethod,\n              \"cardHolderFullName\":cardholdername\n              \n            },\n            config).then(\n            (res) => {\n              const result = res.data;\n              console.log(\"success\");\n            }\n          ).catch(async (error) => {\n            console.log(error);    \n          })\n    }\n\n    return(\n        <div className='Payment'>\n            <header>\n            <h1>Payment</h1>\n            </header>\n\n\n            <ul>\n            {invoices.map((invoice) => {\n\n            \n            return (\n            <li key={invoice.id}>\n                rental id: {invoice.id}\n                total amount:{invoice.amount}\n            \n                {/* money paid: {getpayments} */}\n            </li>\n            );\n            })}\n            </ul>\n\n\n            <div>\n                {/* <label>\n                    total amount : {totalamount}\n                </label> */}\n                <select name=\"method\" id=\"method\" > \n                <option value=\"cash\">cash</option>\n                <option value=\"creditcard\">credit card</option>\n                <option value=\"debitcard\">debit card</option>\n                <option value=\"paypal\">pay pal</option>\n                onChange={(e) => setpaymenttype(e.target.value)}\n                </select>\n                <input type=\"number\" id=\"myInput\" placeholder=\"invoice id..\" value = {invoiceid} onChange={(e) => setinvoiceid(e.target.value)}></input>\n                <input type=\"number\" id=\"myInput\" placeholder=\"type amount..\" value = {amount} onChange={(e) => setpaymentamount(e.target.value)}></input>\n                <input type=\"text\" id=\"myInput\" placeholder=\"card holder name\" value = {cardholdername} onChange={(e) => setcardholdername(e.target.value)}></input>\n            <div>\n            <button onClick={dopay}>pay</button>\n            </div>\n            </div>\n        </div>\n\n    );\n\n}\nexport default Payment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}